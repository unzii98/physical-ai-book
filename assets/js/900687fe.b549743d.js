"use strict";(globalThis.webpackChunkbook=globalThis.webpackChunkbook||[]).push([[753],{2289:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"robotic-nervous-system/python-agents-rclpy","title":"Python Agents and ROS 2 Control with rclpy","description":"rclpy is the Python client library for ROS 2, enabling Python developers to interface with the ROS 2 ecosystem seamlessly. This is crucial for integrating high-level AI agents, often written in Python, with the low-level robot hardware control provided by ROS 2.","source":"@site/docs/01-robotic-nervous-system/02-python-agents-rclpy.md","sourceDirName":"01-robotic-nervous-system","slug":"/robotic-nervous-system/python-agents-rclpy","permalink":"/physical-ai-book/docs/robotic-nervous-system/python-agents-rclpy","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"ROS 2 Nodes, Topics, and Services","permalink":"/physical-ai-book/docs/robotic-nervous-system/nodes-topics-services"},"next":{"title":"Understanding URDF for Humanoids","permalink":"/physical-ai-book/docs/robotic-nervous-system/urdf-humanoids"}}');var i=o(4848),t=o(8453);const r={sidebar_position:2},l="Python Agents and ROS 2 Control with rclpy",c={},a=[{value:"<code>rclpy</code>: The Python-ROS 2 Bridge",id:"rclpy-the-python-ros-2-bridge",level:2},{value:"Creating a Python Node",id:"creating-a-python-node",level:3},{value:"Bridging Python Agents to Robot Controllers",id:"bridging-python-agents-to-robot-controllers",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsxs)(n.h1,{id:"python-agents-and-ros-2-control-with-rclpy",children:["Python Agents and ROS 2 Control with ",(0,i.jsx)(n.code,{children:"rclpy"})]})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"rclpy"})," is the Python client library for ROS 2, enabling Python developers to interface with the ROS 2 ecosystem seamlessly. This is crucial for integrating high-level AI agents, often written in Python, with the low-level robot hardware control provided by ROS 2."]}),"\n",(0,i.jsxs)(n.h2,{id:"rclpy-the-python-ros-2-bridge",children:[(0,i.jsx)(n.code,{children:"rclpy"}),": The Python-ROS 2 Bridge"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"rclpy"})," provides Python bindings for the core ROS 2 functionalities, allowing you to create nodes, publish/subscribe to topics, call/provide services, and handle parameters, all from Python."]}),"\n",(0,i.jsx)(n.h3,{id:"creating-a-python-node",children:"Creating a Python Node"}),"\n",(0,i.jsxs)(n.p,{children:["A typical Python ROS 2 node using ",(0,i.jsx)(n.code,{children:"rclpy"})," involves:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:["Importing ",(0,i.jsx)(n.code,{children:"rclpy"})]}),": The main library."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Importing messages"}),": For communication over topics and services."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:["Initializing ",(0,i.jsx)(n.code,{children:"rclpy"})]}),": Setting up the ROS 2 context."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:["Creating a ",(0,i.jsx)(n.code,{children:"Node"})]}),": Instantiating your specific robot agent."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Spinning the node"}),": Keeping the node alive and processing callbacks."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MinimalPublisher(Node):\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = f'Hello: {self.i}'\n        self.publisher_.publish(msg)\n        self.get_logger().info(f'Publishing: \"{msg.data}\"')\n        self.i += 1\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_publisher = MinimalPublisher()\n    rclpy.spin(minimal_publisher)\n    minimal_publisher.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,i.jsx)(n.h2,{id:"bridging-python-agents-to-robot-controllers",children:"Bridging Python Agents to Robot Controllers"}),"\n",(0,i.jsxs)(n.p,{children:["High-level Python AI agents (e.g., path planners, decision-makers, vision systems) need to send commands to and receive data from low-level robot controllers (e.g., motor drivers, joint controllers). ",(0,i.jsx)(n.code,{children:"rclpy"})," facilitates this:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Agent Perception"}),": Python agent subscribes to sensor data topics (e.g., ",(0,i.jsx)(n.code,{children:"/camera/image_raw"}),", ",(0,i.jsx)(n.code,{children:"/scan"}),") from robot sensors."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Agent Decision-Making"}),": Processes data using AI algorithms."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Agent Action"}),": Publishes command messages (e.g., ",(0,i.jsx)(n.code,{children:"/cmd_vel"})," for velocity, joint position commands) to controller topics or calls controller services."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This integration allows complex AI behaviors developed in Python to directly influence the physical actions of a robot within the ROS 2 framework."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>l});var s=o(6540);const i={},t=s.createContext(i);function r(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);